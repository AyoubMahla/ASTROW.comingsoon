<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ASTROW - AIM THE STARS</title>
<link rel="icon" type="image/png" sizes="512x512" href="astrowlogoblack.png">
<style>
@font-face {
  font-family: 'AstrowFont';
  src: url('AstrowFont.ttf') format('opentype');
}

body, html {
  margin:0; padding:0;
  width:100%; height:100%;
  font-family:'AstrowFont'; color:#fff;
  background:#000;
  overflow-x:hidden;
}

canvas {
  position:fixed; top:0; left:0; width:100%; height:100%;
  z-index:0; pointer-events:none;
}

/* ===== COMMON ===== */
.hidden { display:none; }
.fade {
  opacity:0;
  transition: opacity 1s ease;
}
.fade.show { opacity:1; }

/* ===== COMING SOON ===== */
#comingSoonSection {
  position:relative; z-index:1;
  display:flex; flex-direction:column; align-items:center; justify-content:center;
  height:100vh; gap:20px; text-align:center; padding:0 20px;
}

#logoContainer {
  display:flex; align-items:center; gap:10px; justify-content:center; flex-wrap:wrap;
}

.logo { width:100px; height:auto; }

.star {
  width:90px; height:90px;
  background:url('whitestar.png') no-repeat center/contain;
  animation: spin 5s linear infinite;
}

@keyframes spin {
  0% { transform:rotate(0deg); }
  100% { transform:rotate(360deg); }
}

#subtitle { font-size:26px; margin-bottom:0; }
#comingSoonText { font-size:18px; max-width:320px; line-height:1.3; }

#countdown { font-size:22px; color:#fff; font-family:'AstrowFont'; margin:15px 0; }
#countdown span { font-weight:bold; }

#formWrapper { display:flex; flex-direction:column; align-items:center; width:100%; max-width:480px; gap:15px; }
#registerForm { display:flex; flex-direction:column; align-items:center; gap:10px; background:rgba(255,255,255,0.05); padding:18px; border:2px solid #fff; border-radius:6px; width:100%; }
#emailRow { display:flex; justify-content:center; gap:10px; width:100%; }
#emailInput { flex:1; min-width:220px; padding:12px; border:none; border-radius:4px; background:rgba(255,255,255,0.15); color:#fff; text-align:center; }
#confirmBtn { flex:0 0 110px; padding:12px; background:#fff; color:#000; border:none; border-radius:4px; cursor:pointer; transition:0.3s; font-family:'AstrowFont'; }
#confirmBtn:hover { background:#000; color:#fff; }

#consentWrapper { display:flex; flex-wrap:wrap; justify-content:center; align-items:center; gap:6px; font-size:14px; color:#fff; margin-top:5px; }
#consentWrapper input { transform:scale(1.2); }
#errorMessage { color:#ff4444; font-size:0.9rem; text-align:center; margin-top:5px; display:none; }

/* ===== DROP SECTION ===== */
#dropSection {
  position:relative; z-index:1; display:none; flex-direction:column; align-items:center;
  padding:80px 20px; min-height:100vh; text-align:center; gap:50px;
}

#dropLoader { font-size:24px; margin-bottom:30px; }

.product-section { display:flex; justify-content:center; align-items:center; gap:60px; flex-wrap:wrap; }
.product { position:relative; width:250px; cursor:pointer; overflow:hidden; animation: float 3s ease-in-out infinite; }
@keyframes float { 0%,100%{transform:translateY(0);} 50%{transform:translateY(-12px);} }
.product img { width:100%; transition:opacity 0.5s ease; display:block; }
.product img.back { position:absolute; top:0; left:0; opacity:0; }
.product:hover img.front { opacity:0; }
.product:hover img.back { opacity:1; }
.product h2 { text-align:center; margin-top:10px; font-size:1.3rem; }
.product::after { content:""; position:absolute; top:0; left:-75%; width:50%; height:100%; background:linear-gradient(120deg, rgba(255,255,255,0.1), rgba(255,255,255,0.5), rgba(255,255,255,0.1)); transform:skewX(-25deg); }
.product:hover::after { animation: shine 1s ease forwards; }
@keyframes shine { 0%{left:-75%;}100%{left:125%;} }

#ctaBtn { padding:15px 30px; border:2px solid #fff; background:transparent; color:#fff; cursor:pointer; font-size:1.2rem; transition:0.3s; font-family:'AstrowFont'; }
#ctaBtn:hover { background:#fff; color:#0a0a0a; }
</style>
</head>
<body>

<canvas id="particles"></canvas>

<!-- COMING SOON -->
<div id="comingSoonSection" class="fade show">
  <div id="logoContainer">
    <img src="ASTROW.png" class="logo">
    <div class="star"></div>
  </div>
  <div id="subtitle">Aim the stars.</div>
  <div id="comingSoonText">Coming soon... Enter your email to be informed as soon as the drop is released!</div>

  <div id="countdown">
    <span id="days">00</span> :
    <span id="hours">00</span> :
    <span id="minutes">00</span> :
    <span id="seconds">00</span>
  </div>

  <div id="formWrapper">
    <form id="registerForm">
      <div id="emailRow">
        <input type="email" id="emailInput" placeholder="Email address" required>
        <button type="submit" id="confirmBtn">Confirm</button>
      </div>
    </form>
    <div id="consentWrapper">
      <input type="checkbox" id="consentCheckbox" required>
      <label for="consentCheckbox">I consent to receive notifications from ASTROW.</label>
    </div>
    <div id="errorMessage"></div>
  </div>
</div>

<!-- DROP SECTION -->
<div id="dropSection" class="fade">
  <div id="dropLoader">The drop is live! Loading products...</div>
  <section class="product-section">
    <div class="product">
      <img src="blackbeaniefront.png" class="front">
      <img src="blackbeanieback.png" class="back">
      <h2>Black</h2>
    </div>
    <div class="product">
      <img src="whitebeaniefront.png" class="front">
      <img src="whitebeanieback.png" class="back">
      <h2>White</h2>
    </div>
  </section>
  <button id="ctaBtn">Shop Now</button>
</div>

<script>
// ===== PARTICLES BACKGROUND =====
const canvas = document.getElementById('particles');
const ctx = canvas.getContext('2d');
canvas.width = window.innerWidth; canvas.height = window.innerHeight;

let stars = Array.from({ length:100 },()=>({
  x:Math.random()*canvas.width,
  y:Math.random()*canvas.height,
  r:Math.random()*1.5+0.5,
  speed:Math.random()*0.3+0.02,
  alpha:Math.random()*0.5+0.5,
  delta:Math.random()*0.02+0.005
}));

function animate(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  stars.forEach(s=>{
    s.alpha += s.delta;
    if(s.alpha>1||s.alpha<0.3) s.delta=-s.delta;
    ctx.fillStyle=`rgba(255,255,255,${s.alpha})`;
    ctx.beginPath();
    ctx.arc(s.x,s.y,s.r,0,2*Math.PI);
    ctx.fill();
    s.y += s.speed;
    if(s.y>canvas.height)s.y=0;
  });
  requestAnimationFrame(animate);
}
animate();

// ===== EMAIL FORM =====
const form=document.getElementById('registerForm');
form.addEventListener('submit',async e=>{
  e.preventDefault();
  const checkbox=document.getElementById('consentCheckbox');
  const error=document.getElementById('errorMessage');
  if(!checkbox.checked){ error.textContent='You must consent.'; error.style.display='block'; return; }
  error.style.display='none';
  const email=document.getElementById('emailInput').value;
  try{
    const res=await fetch('https://astrow-coomingsoon.vercel.app/api/saveEmail',{
      method:'POST', headers:{'Content-Type':'application/json'}, body:JSON.stringify({email})
    });
    if(res.ok){
      document.getElementById('comingSoonSection').innerHTML='<div style="font-size:24px;">Your email has been registered!</div>';
    }else{
      const data=await res.json();
      error.textContent=data?.message||'Error sending data.';
      error.style.display='block';
    }
  }catch(err){
    error.textContent='Network error, please try again.'; error.style.display='block';
    console.error(err);
  }
});

// ===== COUNTDOWN =====
const dropDate=new Date("2025-11-12T11:58:00").getTime(); // CHANGE DATE

function updateCountdown(){
  const now=new Date().getTime();
  const distance=dropDate-now;
  if(distance<0){
    clearInterval(countdownInterval);
    // TRANSITION COMING SOON -> DROP
    document.getElementById('comingSoonSection').classList.remove('show');
    setTimeout(()=>{
      document.getElementById('comingSoonSection').classList.add('hidden');
      const drop=document.getElementById('dropSection');
      drop.style.display='flex';
      setTimeout(()=>{drop.classList.add('show');},10);
    },1000); // FADE OUT 1s
    return;
  }
  const days=Math.floor(distance/(1000*60*60*24));
  const hours=Math.floor((distance%(1000*60*60*24))/(1000*60*60));
  const minutes=Math.floor((distance%(1000*60*60))/(1000*60));
  const seconds=Math.floor((distance%(1000*60))/1000);
  document.getElementById('days').textContent=days.toString().padStart(2,'0');
  document.getElementById('hours').textContent=hours.toString().padStart(2,'0');
  document.getElementById('minutes').textContent=minutes.toString().padStart(2,'0');
  document.getElementById('seconds').textContent=seconds.toString().padStart(2,'0');
}
const countdownInterval=setInterval(updateCountdown,1000);
updateCountdown();
</script>

</body>
</html>